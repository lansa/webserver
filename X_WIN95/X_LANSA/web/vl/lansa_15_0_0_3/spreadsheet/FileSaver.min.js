/*
  FileSaver.js
  A saveAs() FileSaver implementation.
  2014-01-24

  By Eli Grey, http://eligrey.com
  License: X11/MIT
  See LICENSE.md
*/
var saveAs=saveAs||"undefined"!==typeof navigator&&navigator.msSaveOrOpenBlob&&navigator.msSaveOrOpenBlob.bind(navigator)||function(a){if("undefined"===typeof navigator||!/MSIE [1-9]\./.test(navigator.userAgent)){var q=a.document,z=a.URL||a.webkitURL||a,e=q.createElementNS("http://www.w3.org/1999/xhtml","a"),A=!a.externalHost&&"download"in e,t=a.webkitRequestFileSystem,w=a.requestFileSystem||t||a.mozRequestFileSystem,B=function(d){(a.setImmediate||a.setTimeout)(function(){throw d;},0)},u=0,m=[],h=
function(){for(var d=m.length;d--;){var a=m[d];"string"===typeof a?z.revokeObjectURL(a):a.remove()}m.length=0},v=function(a,r,c){r=[].concat(r);for(var b=r.length;b--;){var e=a["on"+r[b]];if("function"===typeof e)try{e.call(a,c||a)}catch(f){B(f)}}},n=function(d,b){var c=this,k=d.type,h=!1,f,s,n=function(){var b=(a.URL||a.webkitURL||a).createObjectURL(d);m.push(b);return b},p=function(){v(c,["writestart","progress","write","writeend"])},g=function(){if(h||!f)f=n(d);s?s.location.href=f:window.open(f,
"_blank");c.readyState=c.DONE;p()},l=function(a){return function(){if(c.readyState!==c.DONE)return a.apply(this,arguments)}},x={create:!0,exclusive:!1},y;c.readyState=c.INIT;b||(b="download");if(A)f=n(d),q=a.document,e=q.createElementNS("http://www.w3.org/1999/xhtml","a"),e.href=f,e.download=b,k=q.createEvent("MouseEvents"),k.initMouseEvent("click",!0,!1,a,0,0,0,0,0,!1,!1,!1,!1,0,null),e.dispatchEvent(k),c.readyState=c.DONE,p();else{a.chrome&&k&&"application/octet-stream"!==k&&(y=d.slice||d.webkitSlice,
d=y.call(d,0,d.size,"application/octet-stream"),h=!0);t&&"download"!==b&&(b+=".download");if("application/octet-stream"===k||t)s=a;w?(u+=d.size,w(a.TEMPORARY,u,l(function(a){a.root.getDirectory("saved",x,l(function(a){var e=function(){a.getFile(b,x,l(function(a){a.createWriter(l(function(b){b.onwriteend=function(b){s.location.href=a.toURL();m.push(a);c.readyState=c.DONE;v(c,"writeend",b)};b.onerror=function(){var a=b.error;a.code!==a.ABORT_ERR&&g()};["writestart","progress","write","abort"].forEach(function(a){b["on"+
a]=c["on"+a]});b.write(d);c.abort=function(){b.abort();c.readyState=c.DONE};c.readyState=c.WRITING}),g)}),g)};a.getFile(b,{create:!1},l(function(a){a.remove();e()}),l(function(a){a.code===a.NOT_FOUND_ERR?e():g()}))}),g)}),g)):g()}},b=n.prototype,p=function(a,b){return new n(a,b)};b.abort=function(){this.readyState=this.DONE;v(this,"abort")};b.readyState=b.INIT=0;b.WRITING=1;b.DONE=2;b.error=b.onwritestart=b.onprogress=b.onwrite=b.onabort=b.onerror=b.onwriteend=null;a.addEventListener("unload",h,!1);
p.unload=function(){h();a.removeEventListener("unload",h,!1)};return p}}("undefined"!==typeof self&&self||"undefined"!==typeof window&&window||this.content);"undefined"!==typeof module&&(module.exports=saveAs);
